<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ZeeHUB - Minecraft RCON Panel</title>
  <style>
    body {
      background: linear-gradient(135deg, #0f0f0f, #1a1a1a);
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
    }
    header {
      background: #0f0f0f;
      padding: 20px;
      text-align: center;
      box-shadow: 0 0 15px limegreen;
    }
    h1 {
      font-size: 2.5rem;
      color: limegreen;
      text-shadow: 0 0 10px orange;
    }
    .section {
      margin: 30px auto;
      padding: 20px;
      max-width: 900px;
      background: #1e1e1e;
      border: 1px solid #333;
      border-radius: 10px;
      box-shadow: 0 0 20px #0f0;
    }
    .section h2 {
      color: orange;
      margin-bottom: 10px;
    }
    #playerList span {
      display: inline-block;
      margin: 5px;
      padding: 5px 10px;
      background: #2b2b2b;
      border-radius: 8px;
      box-shadow: 0 0 5px limegreen;
    }
    input, button, select {
      padding: 10px;
      border: none;
      border-radius: 5px;
      margin: 5px;
      background: #333;
      color: white;
      font-size: 1rem;
    }
    button:hover {
      background: limegreen;
      cursor: pointer;
    }
    #consoleOutput {
      background: black;
      color: #0f0;
      font-family: monospace;
      padding: 10px;
      height: 150px;
      overflow-y: auto;
      border-radius: 5px;
    }
  </style>
</head>
<body>

  <header>
    <h1>🌐 ZeeHUB - Minecraft Server Panel</h1>
  </header>

  <div class="section" id="statusSection">
    <h2>🖥️ Server Status</h2>
    <p id="serverStatus">Checking...</p>
    <div id="playerList"></div>
  </div>

  <div class="section" id="commandsSection">
    <h2>📟 Console Commands</h2>
    <input type="text" id="commandInput" placeholder="Enter RCON command..." />
    <button onclick="sendCommand()">Send</button>
    <div>
      <button onclick="quickCommand('say Hello from ZeeHUB!')">💬 Say</button>
      <button onclick="quickCommand('list')">👥 List Players</button>
      <button onclick="quickCommand('time set day')">🌞 Day</button>
      <button onclick="quickCommand('kill @e[type=!player]')">💥 Kill Mobs</button>
      <button onclick="quickCommand('tp @a 0 100 0')">📍 Teleport All</button>
    </div>
    <div id="consoleOutput">Console output will appear here...</div>
  </div>

  <div class="section" id="pluginsSection">
    <h2>🔌 Plugins</h2>
    <p>Plugins section coming soon! (or add via commands)</p>
  </div>

  <script>
    const emojis = ["😎", "👾", "🧠", "🦾", "🎮", "👽", "🔥", "⚡", "💣"];

    function getRandomEmoji() {
      return emojis[Math.floor(Math.random() * emojis.length)];
    }

    async function fetchStatus() {
      try {
        const res = await fetch('http://localhost:3000/api/status');
        const data = await res.json();
        if (data.status === 'online') {
          document.getElementById('serverStatus').innerText = '🟢 Server is ONLINE';
          const match = data.players.match(/There are \d+ of a max \d+ players online: (.+)/);
          const playerList = match ? match[1].split(', ') : [];
          document.getElementById('playerList').innerHTML = playerList
            .map(p => `<span>${getRandomEmoji()} ${p}</span>`)
            .join('');
        } else {
          document.getElementById('serverStatus').innerText = '🔴 Server is OFFLINE';
        }
      } catch (err) {
        document.getElementById('serverStatus').innerText = '❌ Error connecting to server';
      }
    }

    async function sendCommand() {
      const command = document.getElementById('commandInput').value;
      if (!command) return;
      await quickCommand(command);
    }

    async function quickCommand(cmd) {
      try {
        const res = await fetch('http://localhost:3000/api/command', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ command: cmd }),
        });
        const data = await res.json();
        document.getElementById('consoleOutput').innerText += `> ${cmd}\n${data.result}\n\n`;
      } catch (err) {
        document.getElementById('consoleOutput').innerText += `> ${cmd}\nError: ${err.message}\n\n`;
      }
    }

    fetchStatus();
    setInterval(fetchStatus, 10000); // update every 10s
  </script>

</body>
</html>
